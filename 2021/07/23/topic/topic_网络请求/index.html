

<!DOCTYPE html>
<html lang="en" >
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>网络请求 - Android高级工程师</title>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="google" content="notranslate" />
  
  <meta name="description" content="1.TCP为什么是一种可靠的协议？如何做到流量控制和拥...">
  <meta name="author" content="John Doe">
  <link rel="icon" href="/images/icons/favicon-16x16.png" type="image/png" sizes="16x16">
  <link rel="icon" href="/images/icons/favicon-32x32.png" type="image/png" sizes="32x32">
  <link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png" sizes="180x180">
  <meta rel="mask-icon" href="/images/icons/stun-logo.svg" color="#333333">
  
    <meta rel="msapplication-TileImage" content="/images/icons/favicon-144x144.png">
    <meta rel="msapplication-TileColor" content="#000000">
  

  
<link rel="stylesheet" href="/css/style.css">


  
    
<link rel="stylesheet" href="//at.alicdn.com/t/font_1445822_r673sha78lq.css">

  

  
    
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css">

  

  
    
      
        
        
<link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/9.18.1/styles/xcode.min.css" name="highlight-style" mode="light">

      
        
        
<link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/9.18.1/styles/solarized-dark.min.css" name="highlight-style" mode="dark">

      
  

  <script>
    var CONFIG = window.CONFIG || {};
    var ZHAOO = window.ZHAOO || {};
    CONFIG = {
      isHome: false,
      fancybox: true,
      pjax: false,
      lazyload: {
        enable: true,
        only_post: 'false',
        loading: '[object Object]'
      },
      donate: {
        enable: true,
        alipay: 'https://pic.izhaoo.com/alipay.jpg',
        wechat: 'https://pic.izhaoo.com/wechat.jpg'
      },
      galleries: {
        enable: true
      },
      fab: {
        enable: false,
        always_show: false
      },
      carrier: {
        enable: true
      },
      daovoice: {
        enable: false
      },
      preview: {
        background: {
          default: '',
          api: ''
        },
        motto: {
          default: '我在开了灯的床头下，想问问自己的心啊。',
          typing: true,
          api: 'https://v2.jinrishici.com/one.json',
          data_contents: '["data","content"]'
        },
      },
      qrcode: {
        enable: false,
        type: 'url',
        image: 'https://pic.izhaoo.com/weapp-code.jpg',
      },
      toc: {
        enable: true
      },
      scrollbar: {
        type: 'default'
      },
      notification: {
        enable: false,
        delay: 4500,
        list: '',
        page_white_list: '',
        page_black_list: ''
      },
      search: {
        enable: false,
        path: ''
      }
    }
  </script>

  

  

<meta name="generator" content="Hexo 5.4.0"></head>

<body class="lock-screen">
  <div class="loading"></div>
  
    


  <nav class="navbar">
    <div class="left">
      
        <i class="iconfont iconhome j-navbar-back-home"></i>
      
      
      
      
    </div>
    <div class="center">网络请求</div>
    <div class="right">
      <i class="iconfont iconmenu j-navbar-menu"></i>
    </div>
    
  </nav>

  
  

<nav class="menu">
  <div class="menu-container">
    <div class="menu-close">
      <i class="iconfont iconbaseline-close-px"></i>
    </div>
    <ul class="menu-content"><li class="menu-item">
        <a href="/ " class="underline "> 首页</a>
      </li><li class="menu-item">
        <a href="/categories/ " class="underline "> 分类</a>
      </li><li class="menu-item">
        <a href="/galleries/ " class="underline "> 相册</a>
      </li><li class="menu-item">
        <a href="/archives/ " class="underline "> 归档</a>
      </li><li class="menu-item">
        <a href="/about/ " class="underline "> 关于</a>
      </li></ul>
    
      <div class="menu-copyright"><p>Powered by <a target="_blank" href="https://hexo.io">Hexo</a>  |  Theme - <a target="_blank" href="https://github.com/izhaoo/hexo-theme-zhaoo">zhaoo</a></p></div>
    
  </div>
</nav>
  <main id="main">
  <div class="article-wrap">
    <div class="row container">
      <div class="col-xl-3"></div>
      <div class="col-xl-6"><article class="article">
  <div class="wrap">
    <section class="head">
  <img   class="lazyload" data-original="/images/theme/post-image.jpg" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="  draggable="false">
  <div class="head-mask">
    <h1 class="head-title">网络请求</h1>
    <div class="head-info">
      <span class="post-info-item"><i class="iconfont iconcalendar"></i>July 23, 2021</span>
      
      <span class="post-info-item"><i class="iconfont iconfont-size"></i>3516</span>
    </div>
  </div>
</section>
    <section class="main">
      <section class="content">
        <p>1.TCP为什么是一种可靠的协议？如何做到流量控制和拥塞控制？</p>
<p>TCP可靠：是因为可以做到数据包发送的有序、无差错和无重复。<br>流量控制：是通过滑动窗口实现的，因为发送发和接收方消息发送速度和接收速度不一定对等，所以需要一个滑动窗口来平衡处理效率，并且保证没有差错和有序的接收数据包。<br>拥塞控制：慢开始和拥塞避免、快重传和快恢复算法。这写算法主要是为了适应网络中的带宽而作出的调整。</p>
<p>2.TCP和UDP有什么区别？</p>
<p>TCP：基于字节流、面向连接、可靠、能够进行全双工通信，除此以外，还能进行流量控制和拥塞控制，不过效率略低<br>UDP：基于报文、面向无连接、不可靠，但是传输效率高。<br>总的来说，TCP适用于传输效率要求低，准确性要求高或要求有连接。而UDP适用于对准确性要求较低，传输效率要求较高的场景，比如语音通话、直播等。</p>
<ol start="3">
<li>TCP的四次挥手过程？</li>
</ol>
<p>大致意思就是：</p>
<p>Client：我要断开连接了<br>Server：我收到你的消息了<br>Server：我也要断开连接了<br>Client：收到你要断开连接的消息了<br>之后Client等待两个MSL(数据包在网络上生存的最长时间)，如果服务端没有回消息就彻底断开了。</p>
<p>4.TCP的三次握手过程，为什么需要三次，而不是两次或者四次？</p>
<p>只发送两次，服务端是不知道自己发送的消息能不能被客户端接收到。 因为TCP握手是三次，所以此时双方都已经知道自己发送的消息能够被对方收到，所以，第四次的发送就显得多余了。</p>
<p>5.HTTPS传输过程中是如何处理进行加密的？为什么有对称加密的情况下仍然需要进行非对称加密？</p>
<p>过程和上图类似，依次获取证书，公钥，最后生成对称加密的钥匙进行对称加密。</p>
<p>对称加密可以保证加密效率，但是不能解决密钥传输问题；非对称加密可以解决传输问题，但是效率不高。</p>
<p>6.SSL/TLS的握手过程？</p>
<p>这里借用《趣谈网络协议》的图片：</p>
<p>SSL/TLS</p>
<p>7.HTTP和HTTPS有什么区别？</p>
<p>简单来说，HTTP和HTTPS的关系是这样的</p>
<p>HTTPS = HTTP + SSL/TLS</p>
<p>区别如下： HTTP作用于应用层，使用80端口，起始地址是http://，明文传输，消息容易被拦截，串改。 HTTPS作用域传输层，使用443端口，起始地址是https://，需要下载CA证书，传输的过程需要加密，安全性高。</p>
<p>8.HTTP 1.1 和HTTP 2有什么区别？</p>
<p>HTTP 2.0基于HTTP 1.1，与HTTP 2.0增加了：</p>
<p>二进制格式：HTTP 1.1使用纯文本进行通信，HTTP 2.0使用二进制进行传输。<br>Head压缩：对已经发送的Header使用键值建立索引表，相同的Header使用索引表示。<br>服务器推送：服务器可以进行主动推送<br>多路复用：一个TCP连接可以划分成多个流，每个流都会分配Id，客户端可以借助流和服务端建立全双工进行通信，并且流具有优先级。</p>
<p>9.HTTP是哪一层的协议，常见的HTTP状态码有哪些，分别代表什么意思？<br>HTTP协议是应用层的协议。</p>
<p>常见的HTTP状态码有：</p>
<p>类别    解释<br>1xx    请求已经接收，继续处理<br>2xx    服务器已经正确处理请求，比如200<br>3xx    重定向，需要做进一步的处理才能完成请求<br>4xx    服务器无法理解的请求，比如404，访问的资源不存在<br>5xx    服务器收到请求以后，处理错误</p>
<p>10.断点续传<br>基础知识：</p>
<p>Http基础：在Http请求中，可以加入请求头Range，下载指定区间的文件数。<br>RandomAccessFile：支持随机访问，可以从指定位置进行数据的读写。</p>
<p>有了这个基础以后，思路就清晰了：</p>
<p>通过HttpUrlConnection获取文件长度。<br>自己分配好线程进行制定区间的文件数据的下载。<br>获取到数据流以后，使用RandomAccessFile进行指定位置的读写。</p>
<p>11.简述TCP，UDP，Socket<br>TCP是经过3次握手，4次挥手完成一串数据的传送<br>UDP是无连接的，知道IP地址和端口号，向其发送数据即可，不管数据是否发送成功<br>Socket是一种不同计算机，实时连接，比如说传送文件，即时通讯</p>
<p>12.http通信方式<br>HttpURLConnection和HttpClient，HttpURLConnection多用于发送或接收流式数据，因此比较适合上传/下载文件，HttpClient相对来讲更大更全能，但是速度相对也要慢一点。在此只介绍HttpClient的通信流程：</p>
<p>HTTP的请求方式</p>
<p>1、OPTIONS</p>
<p>返回服务器针对特定资源所支持的HTTP请求方法，也可以利用向web服务器发送‘*’的请求来测试服务器的功能性</p>
<p>2、HEAD</p>
<p>向服务器索与GET请求相一致的响应，只不过响应体将不会被返回。这一方法可以再不必传输整个响应内容的情况下，就可以获取包含在响应小消息头中的元信息。</p>
<p>3、GET</p>
<p>向特定的资源发出请求。注意：GET方法不应当被用于产生“副作用”的操作中，例如在Web Application中，其中一个原因是GET可能会被网络蜘蛛等随意访问。Loadrunner中对应get请求函数：web_link和web_url</p>
<p>4、POST</p>
<p>向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据被包含在请求体中。POST请求可能会导致新的资源的建立和/或已有资源的修改。 Loadrunner中对应POST请求函数：web_submit_data,web_submit_form</p>
<p>5、PUT</p>
<p>向指定资源位置上传其最新内容</p>
<p>6、DELETE</p>
<p>请求服务器删除Request-URL所标识的资源</p>
<p>7、TRACE</p>
<p>回显服务器收到的请求，主要用于测试或诊断</p>
<p>8、CONNECT</p>
<p>HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器。</p>
<p>Http是应用层协议，TCP是网络层协议，</p>
<p>我觉得区别从这两个连接的实现方式就可以看出来，HTTP连接需要指明资源的URL，发出请求的应用不知道服务器的IP，虽然域名服务器也是要把域名解析成IP地址，但不属于应用所关心的范畴，是网络层应该完成的工作。所以Http连接属于无状态的短连接，若再请求其他数据，需要再重新建立连接。客户端向服务器发送请求后，服务器才知道客户端的存在。</p>
<p>TCP连接实现时需要指明IP地址和端口号，就可以跟目的主机通过三次握手建立联系，该连接一直保持直到某一方提出取消连接，通过四次握手关闭连接。Socket支持TCP/UDP协议，如果使用TCP协议，那么socket连接就是TCP连接。论文提到的应用场景是手机与云端的服务器建立联系，因为要保持连接并指定连接的建立时间，所以在这种场景下使用TCP连接最合适。3G网络不支持端到端建立TCP连接，因为它是client-server模式，所以需要通过云端服务器的辅助来实现手机的端到端通信。</p>
<p>13.Android TCP通信<br>TCP层是介于IP层和应用层的中间层</p>
<p>本质是通过Socket进行通信，服务端创建一个ServiceSocket，客户端创建一个Socket，两者通过Ip和端口进行连接，连接成功后，就酒交给IO流进行通信。</p>
<p>14.谈谈对RxJava的理解<br>RxJava：它是一个响应式的编程，区别于我们常用的应试编程，是一种观察者的设计模式，封装后是一个实现异步的操作库<br>响应式编程可以将数据和展示分层，很好的解耦，例如我们最常见的Buttom事件，设置监听事件，触发后回调<br>RxJava就是基于这种响应式的方式设计，在看看他是实现方式，有的人一开始会觉得它的代码好多，刚开始的时候我要注册，还要回调，主要你还是没有了解它的操作符的强大，操作符也是他的核心，你想用到的方法在里面都能找到，特别是当代码量多了之后，你会发现RxJava的代码看起来简洁，便于后期的维护<br>再说说它的操作符，常用的创建，交换，过滤这些就不说了，主要想说说它的错误操作符，它极大的简化了错误处理，便于我们后期维护排查<br>最后说说它的调度器，RxJava本身就是一个异步操作库，当我做一些耗时的操作时，往往会编写很多多线程，都知道多线程的编写和维护都是很烦的，RxJava很好的解决了这个鬼问题<br>好处：<br>Rx使代码简化<br>函数式风格：对可观察数据流使用无副作用的输入输出函数，避免了程序里错综复杂的状态<br>简化代码：Rx的操作符通通常可以将复杂的难题简化为很少的几行代码<br>异步错误处理：传统的try/catch没办法处理异步计算，Rx提供了合适的错误处理机制<br>轻松使用并发：Rx的Observables和Schedulers让开发者可以摆脱底层的线程同步和各种并发问题</p>

      </section>
      <section class="extra">
        
          <ul class="copyright">
  
    <li><strong>本文作者：</strong>John Doe</li>
    <li><strong>本文链接：</strong><a href="http://example.com/2021/07/23/topic/topic_%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/index.html" title="http:&#x2F;&#x2F;example.com&#x2F;2021&#x2F;07&#x2F;23&#x2F;topic&#x2F;topic_%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82&#x2F;index.html">http:&#x2F;&#x2F;example.com&#x2F;2021&#x2F;07&#x2F;23&#x2F;topic&#x2F;topic_%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82&#x2F;index.html</a></li>
    <li><strong>版权声明：</strong>本博客所有文章均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" title="BY-NC-SA" target="_blank" rel="noopener">BY-NC-SA</a> 许可协议，转载请注明出处！</li>
  
</ul>
        
        
          <section class="donate">
  <div id="qrcode-donate">
    <img   class="lazyload" data-original="https://pic.izhaoo.com/alipay.jpg" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" >
  </div>
  <div class="icon">
    <a href="javascript:;" id="alipay"><i class="iconfont iconalipay"></i></a>
    <a href="javascript:;" id="wechat"><i class="iconfont iconwechat-fill"></i></a>
  </div>
</section>
        
        
        
  <nav class="nav">
    <a href="/2021/07/23/topic/topic_%E7%BB%84%E4%BB%B6%E5%8C%96%E4%B8%8E%E6%8F%92%E4%BB%B6%E5%8C%96/"><i class="iconfont iconleft"></i>组件化/插件化</a>
    <a href="/2021/07/23/topic/topic_%E8%87%AA%E5%AE%9A%E4%B9%89View/">自定义view<i class="iconfont iconright"></i></a>
  </nav>

      </section>
      
    </section>
  </div>
</article></div>
      <div class="col-xl-3">
        
          
  <aside class="toc-wrap">
    <h3 class="toc-title">文章目录：</h3>
    
  </aside>

        
      </div>
    </div>
  </div>
</main>
  

<footer class="footer">
  <div class="footer-social"><a 
        href="tencent://message/?Menu=yes&uin=894519210 "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color= '#12B7F5'" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  iconQQ "></i>
      </a><a 
        href="javascript:; "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color= '#09BB07'" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  iconwechat-fill "></i>
      </a><a 
        href="https://www.instagram.com/izhaoo/ "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color= '#DA2E76'" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  iconinstagram "></i>
      </a><a 
        href="https://github.com/zhaoo "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color= '#9f7be1'" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  icongithub-fill "></i>
      </a><a 
        href="mailto:izhaoo@163.com "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color=#FF3B00" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  iconmail"></i>
      </a></div>
  
    <div class="footer-copyright"><p>Powered by <a target="_blank" href="https://hexo.io">Hexo</a>  |  Theme - <a target="_blank" href="https://github.com/izhaoo/hexo-theme-zhaoo">zhaoo</a></p></div>
  
</footer>
  
  
  
  
</body>

<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>



  
<script src="https://cdn.bootcdn.net/ajax/libs/jquery.lazyload/1.9.1/jquery.lazyload.min.js"></script>




  
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>








<script src="/js/utils.js"></script>
<script src="/js/script.js"></script>







  <script>
    (function () {
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
      } else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>













</html>